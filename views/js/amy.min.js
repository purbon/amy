(function(){var t,e,o,n,r;n=function(){function t(){}return t.prototype.setup=function(t){var e,o;o=this,e={url:t+"?date="+(new Date).getTime(),type:"GET",dataType:"json",success:function(t){var e,n,r,i;$(".resources div").remove(),n=0,i=t.resources;for(r in i)e=i[r],r=o.add_resource(r,e,n,t.base_url),r.toggle(),n++;return o.add_resource_events(t),o.toggle_method_if_necessary()},error:function(){return $(".resources div").remove()}},$.ajax(e)},t.prototype.add_resource=function(t,o,n,r){return null==r&&(r=""),o=new e(t,o,n,r),o.build(),o},t.prototype.add_resource_events=function(){var t,e;t=function(){$(this).css("background","#f5f5f5"),$(this).children("div").children().css("color","black")},e=function(){$(this).css("background","#fff"),$(this).children("div").children().css("color","#999")},$(".resource").hover(t,e),$(".resource").click(function(){event.stopPropagation(),$(this).next().fadeToggle()})},t.prototype.toggle_method_if_necessary=function(){var t,e;t=window.location.hash.replace("!",""),t=t.replace(/\//g,"\\/"),t=t.replace(/:/g,"\\:"),e=t.split("#"),$("#"+e[1]+" + div .method."+e[2]+" .content").fadeToggle(),$("#"+e[1]+" + div .method."+e[2]+" .form").fadeToggle(),$("#"+e[1]).next().fadeToggle()},t.toggleMethods=function(t){event.stopPropagation(),$("#resource"+t).fadeToggle()},t.showJSON=function(){var t;event.stopPropagation(),t=$("#selector #key").val(),t&&window.open(t,"_self")},window.toggleMethods=t.toggleMethods,window.showJSON=t.showJSON,t}(),$(document).ready(function(){var t,e,o;t=new n,o=new r,o.toggle_by_class("content"),e=o.default_config_url(),$("#header #selector input").val(e),t.setup(e),$("#header #explore").click(function(){return t.setup($("#header #selector input").val())})}),o=function(){function t(t,e){this.method=t,this.config=e}return t.prototype.build=function(){var t,e,o;return t="",e=this.config.params||[],("get"===(o=this.method)||"options"===o||"head"===o)&&(t=this.add_form(e)),t},t.prototype.add_form=function(t){var e,o,n,r;for(e="<form>",n=0,r=t.length;r>n;n++)o=t[n],e+="<div class='field'>",e+="<label>:"+o[0]+"<small>("+o[1]+")</small></label>",e+="<input type='text' id='"+o[0]+"'></input>",e+="</div>";return e+='<input type="button" value="Submit"></input>',e+="</form>",e+='<textarea class="output"></textarea>'},t}(),t=function(){function t(t,e,o,n){this.method=t,this.config=e,this.base_url=o,this.i=n}return t.prototype.attach_to_form=function(){var t;t=this,$("#resource"+this.i+" ."+this.method+" .form input[type=button]").click(function(e){var o,n,r;return r=t.scrap_params(e),n=$(e.target).parent().siblings(".output"),o=t.config[t.method],t.execute_method(t.method.toUpperCase(),t.base_url,o,r,n)})},t.prototype.scrap_params=function(t){var e,o,n;return o=$(t.target).parentsUntil(".methods"),o=$($(o)[o.length-1]).parent().prev().attr("id"),e=$(t.target).parent().children(".field").children("input"),n={},$.each(e,function(t,e){n[$(e).attr("id")]=$(e).val()}),n},t.prototype.execute_method=function(t,e,o,n,r){var i,s,a,c;c=""+e+o.url;for(s in n)a=n[s],c=c.replace(":"+s,a);i={type:t,async:!0,url:c,success:function(t){r.text(JSON.stringify(t))}},$.ajax(i)},t}(),e=function(){function e(t,e,o,n){this.resource=t,this.config=e,this.i=o,this.base_url=n}return e.prototype.toggle=function(){$("#resource"+this.i).toggle()},e.prototype.build=function(){var e,o,n,r,i;o=this.build_html(this.resource,this.config,this.i),$(".resources").append(o),i=this.config.config;for(n in i)e=i[n],r=new t(n,this.config.config,this.base_url,this.i),r.attach_to_form();$("#resource"+this.i+" .content").toggle(),$("#resource"+this.i+" .form").toggle(),$("#resource"+this.i+" .method .url a").click(function(){return $(this).parent().parent().next().next().fadeToggle(),$(this).parent().parent().next().fadeToggle()})},e.prototype.build_html=function(t,e,o){var n;return n="<div class='resource' id='"+t+"'>",n+="<div class='name'>  <a href='#!"+t+"'>"+t+"</a> </div>",n+="<div class='title'>"+e.title+"</div>",n+="<div class='menu'> <a href='#' onclick='toggleMethods("+o+")'>Show/Hide</a> | <a href='#' onclick='showJSON()'>Raw</a> </div>",n+="</div>",n+=this.add_section(t,e.config,e.config,o)},e.prototype.add_section=function(t,e,o,n){var r,i,s,a,c;s="<div class='methods' id='resource"+n+"'>";for(a in e)i=e[a],c=a.replace(/(\d+)/g,""),r=o[a.toLowerCase()].content,s+="<div class='method "+c+"'>",s+='<div class="header">',s+="<div class='name "+c+"'>"+c+"</div>",s+="<div class='url'><a href='#!"+t+"#"+a.toLowerCase()+"'>"+i.url+"</a></div>",s+="<div class='desc'>"+i.title+"</div>",s+="</div>",s+="<div class='form'>"+this.add_form(a.toLowerCase(),o[a.toLowerCase()])+"</div>",s+="<div class='content'>"+r+"</div>",s+="</div>";return s+="</div>"},e.prototype.add_form=function(t,e){var n;return n=new o(t,e),n.build()},e}(),r=function(){function t(){}return t.prototype.toggle_by_class=function(t){var e,o,n,r;for(o=document.getElementsByClassName(t),n=0,r=o.length;r>n;n++)e=o[n],console.log(e),$(e).toggle(!1)},t.prototype.default_config_url=function(){var t;return t=window.location.pathname,t=t.replace(t.substring(t.lastIndexOf("/")+1,t.length),""),""+window.location.origin+t+"data.json"},t}()}).call(this);